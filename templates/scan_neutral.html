{% extends "index.html" %}

{% block title %}Scanner{% endblock %}

{% block logout_display %}block{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='scan_neutral.css') }}?t={{ time }}">
{% endblock %}


{% block scripts %}
<script type="text/javascript" src="https://unpkg.com/@zxing/library@latest"></script>
<script type="text/javascript" src="{{ url_for('static', filename='scan_neutral.js') }}"></script>
{% endblock %}

{% block content %}

<div>
  <video id="video" style="border: 1px solid gray"></video>
</div>

<br>

<div>
  <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" id="startButton">
    Start
  </button>
  <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" id="resetButton">
    Reset
  </button>
</div>

  <br>

  <p>Name: <span id="name"></span></p>
  <p>Status: <span id="status"></span></p>

  <form action="/verify" method="GET">
      <label for="location">Location ID:</label>
      <input type="text" id="loc_id" name="loc_id" value="{{ loc_id }}"><br>

      <select id="recordType" class="mdl-textfield__input" size="1">
        {% for x in range(r) %}
          <option value="{{ loc_ids[x] }}">{{ loc_names[x] }}</option>
        {% endfor %}
      </select>

      <label for="survey_id">Survey ID:</label>
      <input type="text" id="survey_id" name="survey_id"><br>
      <input type="submit" value="Submit">
  </form>
<div>
  <label for="sourceSelect">Change video source:</label>
  <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" id="sourceSelectPanel">
    <select id="sourceSelect" class="mdl-textfield__input">
    </select>
  </div>
</div>

<div>
  <label for="recordType" >Location: </label>
  <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
      <select id="recordType" class="mdl-textfield__input" size="1">
        {% for x in range(r) %}
          <option value="{{ loc_ids[x] }}">{{ loc_names[x] }}</option>
        {% endfor %}
      </select>
  </div>
</div>

<br>

<label>Result:</label>
<pre><code id="result"></code></pre>


<audio id="accept" src="{{ url_for('static', filename='audio/accept.mp3') }}" preload="auto" controls="none" style="display: none;"></audio>
<audio id="reject" src="{{ url_for('static', filename='audio/reject.mp3') }}" preload="auto" controls="none" style="display: none;"></audio>

{% endblock %}
